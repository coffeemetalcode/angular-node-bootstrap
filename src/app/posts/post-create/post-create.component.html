<div class="d-flex justify-content-center" *ngIf="isLoading">
  <div class="spinner-border" role="status">
    <span class="sr-only">Loading...</span>
  </div>
</div>

<div class="card" *ngIf="!isLoading">
  <div class="card-body">
    <form
      class="needs-validation"
      (submit)="onSavePost()"
      [formGroup]="form"
      novalidate>
      <div class="form-group">
        <label for="title">Post Title</label>
        <input
          class="form-control"
          type="text"
          formControlName="title"
          placeholder="Post Title">
      </div>
      <div
        class="invalid"
        *ngIf="form.get('title').touched && form.get('title').invalid">Title is required</div>
      <div>
        <button
          class="btn btn-outline-primary"
          type="button"
          (click)="filePicker.click()"
          >Choose Image</button>
        <input
          type="file"
          #filePicker
          (change)="onImagePicked($event)">
        <div
          class="image-preview"
          *ngIf="imagePreview !== null && imagePreview !== '' && form.get('image').valid">
          <img [src]="imagePreview" [alt]="form.value.title">
        </div>
      </div>
      <div class="form-group">
        <label for="content">Post Content</label>
        <textarea
          class="form-control"
          rows="6"
          formControlName="content"
          placeholder="Post Content">
        </textarea>
      </div>
      <div
        class="invalid"
        *ngIf="form.get('content').touched && form.get('content').invalid">Content is required</div>
      <button
        class="btn btn-primary"
        type="submit"
        [disabled]="form.invalid">Save Post</button>
    </form>
  </div>
</div>